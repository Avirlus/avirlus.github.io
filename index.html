<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/x-icon" href="/icons/favicon.ico">
    <link rel="stylesheet" href="/styles/styles.css">
    <title>Шифрование кода | Бесплатно и без регистрации и смс | Одобрено Клясс Виолеттой</title>
</head>
<body>
    <h2>Шифрование кода | Бесплатно и без регистрации и смс | Одобрено Клясс Виолеттой</h2>
    <textarea id="inputText" rows="10" cols="50" placeholder="Вставьте текст здесь..."></textarea><br>
    <button onclick="executeCode()">Выполнить</button><br>
    <button onclick="copyOutput()">Копировать</button><br>
    <textarea id="outputText" rows="10" cols="50" placeholder="Результат будет здесь..."></textarea><br>
    <div id="status">Статус: Готово</div>

    <script>
        function executeCode() {
            var inputText = document.getElementById('inputText').value.split('\n');
            var urlInput = 'http://avirland.online/lines.txt';
            var outputText = [];
            var status = document.getElementById('status');

            status.innerText = 'Чтение текста...';
            fetch(urlInput)
                .then(response => response.text())
                .then((data) => {
                    var linesText = data.split('\n');

                    status.innerText = 'Замена строк...';
                    for (var i = 0; i < inputText.length; i++) {
                        var val1 = Math.floor(998000 * i / inputText.length) + 500;
                        var val2 = Math.floor(998000 * (i + 1) / inputText.length) + 499;
                        var randomIndex = Math.floor(Math.random() * (val2 - val1 + 1)) + val1;
                        linesText[randomIndex] = inputText[i];
                        status.innerText = val1 + ',' + val2;
                    }

                    status.innerText = 'Сохранение нового текста...';
                    document.getElementById('outputText').value = linesText.join('\n').replace('/new', '\n').replace('/tab', ' ');
                    status.innerText = 'Готово';
                });
        }
        function copyOutput() {
            var outputText = document.getElementById('outputText').value;
            // Копируем текст результата в буфер обмена
            navigator.clipboard.writeText(outputText)
                .then(() => {
                    // Выводим сообщение об успешном копировании
                    alert('Текст скопирован в буфер обмена');
                })
                .catch((err) => {
                    // Выводим сообщение об ошибке
                    alert('Не удалось скопировать текст: ' + err);
                });
        }
    </script>
</body>
</html>
